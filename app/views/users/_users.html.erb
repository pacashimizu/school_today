<% if users.any? %>
  <div class="mb-3">
    <% users.each do |user| %>
      <div class="card mb-1 shadow-sm">
        <div class="row g-0">
          <div class="col-4">
            <% if user.image? %>
              <%= image_tag user.image.url, class: "card-img p-1" %>
            <% else %>
              <%= image_tag "default.jpg", class: "card-img p-1" %>
            <% end %>
          </div>
          <div class="col-8">
            <div class="card-body d-flex p-4">
              <div class="col-9">
                <p class="card-text"><span class="badge bg-success rounded-pill"><%= user.grade.name %></span></p>
                <h4 class="card-title"><%= user.name %></h4>
                <% if current_page?(teachers_users_path) || current_page?(search_teachers_users_path) %>
                  <p class="card-text"><%= user.comment %></p>
                <% else %>
                  <p class="card-text">ID: <%= user.login_id %></p>
                <% end %>
              </div>
              <% if current_user.teacher? %>
                <div class="col-3 d-flex flex-column gap-1 justify-content-center">
                  <%= link_to "編集", edit_user_path(user), class: "btn btn-outline-secondary btn-sm rounded-pill" %>
                  <%= link_to "削除", user, method: :delete, data: { confirm: "ユーザを削除してよいですか？" }, class: "btn btn-danger btn-sm rounded-pill" %>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>
  <%== pagy_bootstrap_nav(@pagy) %>
<% else %>
  <p>条件に該当する方がいません。</p>
<% end %>